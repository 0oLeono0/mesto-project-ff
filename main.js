(()=>{"use strict";var e=function(e){e.remove()},t=function(e){e.classList.toggle("card__like-button_is-active")},n=function(e,t,n){var r=n.onDelete,o=n.onLike,c=n.onPreview,i=function(e,t){var n=e.name,r=e.link,o=t.querySelector(".card").cloneNode(!0),c=o.querySelector(".card__image");return o.querySelector(".card__title").textContent=n,c.src=r,c.alt=n,{cardEl:o,imgEl:c}}(e,t),u=i.cardEl,a=i.imgEl;u.querySelector(".card__delete-button").addEventListener("click",(function(){return r(u)}));var l=u.querySelector(".card__like-button");return l.addEventListener("click",(function(){return o(l)})),a.addEventListener("click",(function(){return c(a,u)})),u},r=null,o=function(e){"Escape"===e.key&&r&&i(r)},c=function(e){e.classList.add("popup_is-opened"),r=e,document.addEventListener("keydown",o)},i=function(e){e.classList.remove("popup_is-opened"),r===e&&(r=null,document.removeEventListener("keydown",o))},u=function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),n.classList.remove("popup__input-error_active"),n.textContent=""},a=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.disabled=!1:t.disabled=!0},l=document.querySelector("#card-template").content,p=document.querySelector(".places__list"),d=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),m=document.querySelector(".popup_type_edit"),v=document.querySelector(".popup_type_new-card"),_=document.querySelector(".popup_type_image"),f=document.querySelectorAll(".popup"),y=document.querySelectorAll(".popup__close"),k=document.forms["edit-profile"],q=k.elements.name,S=k.elements.description,E=document.querySelector(".profile__title"),L=document.querySelector(".profile__description"),g=document.forms["new-place"],h=function(e,t){var n=_.querySelector(".popup__image"),r=_.querySelector(".popup__caption");n.src=e.src,n.alt=e.alt,r.textContent=t.querySelector(".card__title").textContent,c(_)};y.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return i(t)}))})),f.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target===e&&i(e)}))})),d.addEventListener("click",(function(){var e,t,n;e=k,t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button"),t.forEach((function(t){u(e,t),t.setCustomValidity("")})),a(t,n),q.value=E.textContent,S.value=L.textContent,c(m)})),Array.from(document.querySelectorAll("form[novalidate]")).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");a(t,n),t.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){var n=t.value;""===n||/^[A-Za-zА-Яа-яЁё \-]+$/.test(n)?t.setCustomValidity(""):t.setCustomValidity("Разрешены только латинские и кириллические буквы, дефис и пробел"),t.validity.valid?u(e,t):function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("popup__input_type_error"),r.textContent=n,r.classList.add("popup__input-error_active")}(e,t,t.validationMessage)}(e,r),a(t,n)}))}))}(e)})),k.addEventListener("submit",(function(e){e.preventDefault(),E.textContent=q.value,L.textContent=S.value,i(m)})),s.addEventListener("click",(function(){return c(v)})),g.addEventListener("submit",(function(r){r.preventDefault();var o=g.elements["place-name"].value,c=g.elements.link.value,u=n({name:o,link:c},l,{onDelete:e,onLike:t,onPreview:h});p.prepend(u),g.reset(),i(v)})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(r){var o=n(r,l,{onDelete:e,onLike:t,onPreview:h});p.append(o)}))})();